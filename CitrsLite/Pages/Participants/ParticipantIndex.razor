@page "/participant"
@using CitrsLite.Business.Enums;
@using CitrsLite.Business.Services;
@using CitrsLite.Business.ViewModels.ParticipantViewModels;
@using CitrsLite.Data.Models;
@inject ParticipantIndexViewModel Model;
@inject ParticipantService ParticipantService;

<MudContainer MaxWidth="MaxWidth.Small">
    <EditForm Model="Model" OnValidSubmit="getParticipants">
        <MudCard> 
            <MudCardHeader>
                <MudText Typo="Typo.h2">Participant Search</MudText>
            </MudCardHeader>
            <MudCardContent>

                <MudTextField Label="Name" @bind-Value="Model.Name" Variant="Variant.Filled" />
                <MudSelect Label="Type" T="string" @bind-Values="Model.Type"  Variant="Variant.Filled">
                    @foreach (var partType in Enum.GetValues(typeof(ParticipantType)))
                    {
                        <MudSelectItem Value="@partType.ToString().Replace("_", " ")" />
                    }
                </MudSelect>
                <MudTextField Label="Phone" @bind-Value="Model.Phone" Variant="Variant.Filled" />
                <MudTextField Label="Phone" @bind-Value="Model.Phone" Variant="Variant.Filled" />
                <MudTextField Label="City" @bind-Value="Model.City" Variant="Variant.Filled" />

            </MudCardContent>
            <MudCardActions Class="gap-3">
                <MudButton ButtonType="ButtonType.Submit"
                           Variant="Variant.Filled"
                           Color="Color.Primary">
                    Search
                </MudButton>
                <MudButton ButtonType="ButtonType.Button"
                           Variant="Variant.Filled"
                           Color="Color.Secondary"
                           OnClick="reset">
                    Reset
                </MudButton>
            </MudCardActions>
        </MudCard>
    </EditForm>
</MudContainer>
<MudContainer>
    <ParticipantTable Participants="participants" />
</MudContainer>
